"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var __spreadArrays=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<i;e++)for(var o=arguments[e],a=0,p=o.length;a<p;a++,s++)n[s]=o[a];return n},Pagination=function(){function t(t){this.options={element:"",type:1,pageIndex:1,pageSize:0,pageCount:9,total:0,prevText:"",nextText:"",jumper:!1,singlePageHide:!0,disabled:!1,currentChange:function(t){}},this.element=null,this.lis=[],this.home=null,this.last=null,this.prev=null,this.next=null,this.input=null,this.pageNum=0,this.validate(t)&&this.init(t)}return t.prototype.init=function(t){this.setOptions(t),this.render()},t.prototype.render=function(){var t,e,i=this,n=this;if(this.pageNum=Math.ceil(this.options.total/this.options.pageSize),this.element.innerHTML="",1!==this.pageNum||!this.options.singlePageHide){this.options.pageIndex>this.pageNum&&(this.options.pageIndex=this.pageNum),this.options.pageIndex<=0&&(this.options.pageIndex=1);var s=this.createElement("div","_page_container"),o=this.createElement("ul",["_pages","_pages_"+this.options.type]),a=this.options.pageIndex<=1?["_disabled_c"]:[];this.options.pageIndex<=1&&this.options.disabled&&a.push("_disabled"),this.options.type<=1&&(this.home=this.createElement("li",__spreadArrays(["_home"],a)),this.home.innerText="首页",this.home.addEventListener("click",function(){1<i.options.pageIndex&&i.handleChangePage(1)}),o.appendChild(this.home)),this.prev=this.createElement("li",__spreadArrays(["_prev_"],a,this.options.prevText?["_prev"]:["_iconfont","iconzuo"])),this.prev.innerText=this.options.prevText||"",this.prev.addEventListener("click",function(){0<i.options.pageIndex-1&&i.handleChangePage(i.options.pageIndex-1)}),o.appendChild(this.prev);for(var p=this.getBetween(),r=1;r<=this.pageNum;r++)r>=p.min&&r<=p.max&&(e=r===this.options.pageIndex?["_active_"+this.options.type]:[],r===this.options.pageIndex&&this.options.disabled&&e.push("_disabled"),(t=this.createElement("li",__spreadArrays(["_pages_li_"+this.options.type],e))).innerText=r.toString(),t.setAttribute("data-index",r.toString()),t.addEventListener("click",function(){this.dataset.index!=n.options.pageIndex&&n.handleChangePage(Number(this.dataset.index))}),null!==(e=this.lis)&&void 0!==e&&e.push(t),o.appendChild(t));var h,d=this.options.pageIndex>=this.pageNum?["_disabled_c"]:[];this.options.pageIndex>=this.pageNum&&this.options.disabled&&d.push("_disabled"),this.next=this.createElement("li",__spreadArrays(["_next_"],d,this.options.nextText?["_next"]:["_iconfont","iconGroup-"])),this.next.innerText=this.options.nextText||"",this.next.addEventListener("click",function(){i.options.pageIndex<i.pageNum&&i.handleChangePage(i.options.pageIndex+1)}),o.appendChild(this.next),this.options.type<=1&&(this.last=this.createElement("li",__spreadArrays(["_last"],d)),this.last.innerText="尾页",this.last.addEventListener("click",function(){i.options.pageIndex<i.pageNum&&i.handleChangePage(i.pageNum)}),o.appendChild(this.last)),s.appendChild(o),this.options.jumper&&(a=this.createElement("div","_jumper"),(d=this.createElement("span","_count")).innerText="共 "+this.pageNum+" 页",a.appendChild(d),(d=this.createElement("span")).innerText="前往",a.appendChild(d),h=0,this.input=this.createElement("input","_jumper_input"),this.input.type="number",this.input.value=this.options.pageIndex.toString(),this.input.setAttribute("min","1"),this.input.setAttribute("max",this.pageNum.toString()),["blur","keydown"].forEach(function(t){i.input.addEventListener(t,function(t){"keydown"===t.type&&13!==t.keyCode||((h=(h=~~this.value)<1?1:h)>n.pageNum&&(h=n.pageNum),(this.value=h)!==n.options.pageIndex&&n.handleChangePage(h))})}),a.appendChild(this.input),(d=this.createElement("span")).innerText="页",a.appendChild(d),s.appendChild(a)),this.element.appendChild(s)}},t.prototype.handleChangePage=function(e){var i,n=this;this.options.pageIndex=e;["home","last","prev","next"].forEach(function(t){"home"!==t&&"prev"!==t||(i=e<=1?"add":"remove"),"last"!==t&&"next"!==t||(i=e>=n.pageNum?"add":"remove"),n[t]&&(n[t].classList[i]("_disabled_c"),n.options.disabled&&n[t].classList[i]("_disabled"))});for(var t=this.getBetween(),s=this.generateArray(t.min,t.max),o=0;o<this.lis.length;o++)i=s[o]===e?"add":"remove",this.lis[o].classList[i]("_active_"+this.options.type),this.lis[o].setAttribute("data-index",s[o]),this.lis[o].innerText=s[o].toString(),this.options.disabled&&this.lis[o].classList[i]("_disabled");this.options.jumper&&(this.input.value=e),"function"==typeof this.options.currentChange&&this.options.currentChange(e)},t.prototype.getBetween=function(){var t=this.options.pageIndex-Math.floor(this.options.pageCount/2);(t=t>this.pageNum-this.options.pageCount?this.pageNum-this.options.pageCount+1:t)<=1&&(t=1);var e=this.options.pageIndex+Math.floor(this.options.pageCount/2);return{min:t,max:e=(e=e<this.options.pageCount?this.options.pageCount:e)>this.pageNum?this.pageNum:e}},t.prototype.generateArray=function(t,e){for(var i=[],n=t;n<=e;n++)i.push(n);return i},t.prototype.createElement=function(t,e){var i=document.createElement(t);return e&&(e instanceof Array?e.forEach(function(t){i.classList.add(t)}):i.classList.add(e)),i},t.prototype.validate=function(e){if(!e)throw new Error("options of null");if("object"!==_typeof(e))throw new Error("options not an object");if(!document.querySelector(e.element))throw new Error("element of null");return["type","pageIndex","pageSize","pageCount","total"].forEach(function(t){if(e[t]){if(isNaN(e[t]))throw new Error(t+" not an number");if("pageCount"===t&&e[t]%2==0)throw new Error(t+" not an odd number")}}),!0},t.prototype.setOptions=function(t){for(var e in this.element=document.querySelector(t.element),t)void 0!==t[e]&&(this.options[e]=isNaN(t[e])?t[e]:+t[e])},t}();